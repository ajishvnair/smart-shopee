(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[7],{377:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"c",(function(){return c})),t.d(a,"b",(function(){return r}));var n={categoryNameEnglish:"",categoryNameMalayalam:"",image:null,status:!1,isDeleted:!1,priority:null},c={_id:null,categoryId:null,active:!1,productNameEnglish:"",productNameMalayalam:"",unit:"1kg",actualPrice:"",sellingPrice:"",isDeleted:!1,validity:{startTime:null,endTime:null},description:"",image:null,priority:null},r={_id:null,active:!1,location:""}},429:function(e,a,t){"use strict";var n=t(154);a.a=n.a},603:function(e,a,t){"use strict";var n=t(0),c=t(2),r=t(30),i=t(31),l=t(1),o=t.n(l),s=t(360),u=t(28),d=n.forwardRef((function(e,a){var t,l=e.prefixCls,d=void 0===l?"rc-switch":l,m=e.className,f=e.checked,b=e.defaultChecked,g=e.disabled,y=e.loadingIcon,h=e.checkedChildren,p=e.unCheckedChildren,v=e.onClick,O=e.onChange,j=e.onKeyDown,E=Object(i.a)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),C=Object(s.a)(!1,{value:f,defaultValue:b}),k=Object(r.a)(C,2),w=k[0],N=k[1];function x(e,a){var t=w;return g||(N(t=e),null===O||void 0===O||O(t,a)),t}var _=o()(d,m,(t={},Object(c.a)(t,"".concat(d,"-checked"),w),Object(c.a)(t,"".concat(d,"-disabled"),g),t));return n.createElement("button",Object.assign({},E,{type:"button",role:"switch","aria-checked":w,disabled:g,className:_,ref:a,onKeyDown:function(e){e.which===u.a.LEFT?x(!1,e):e.which===u.a.RIGHT&&x(!0,e),null===j||void 0===j||j(e)},onClick:function(e){var a=x(!w,e);null===v||void 0===v||v(a,e)}}),y,n.createElement("span",{className:"".concat(d,"-inner")},w?h:p))}));d.displayName="Switch";var m=d,f=t(36),b=t.n(f),g=t(104),y=t(94),h=t(33),p=t(18);function v(){return(v=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function O(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var j=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(e);c<n.length;c++)a.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(e,n[c])&&(t[n[c]]=e[n[c]])}return t},E=n.forwardRef((function(e,a){var t,c=e.prefixCls,r=e.size,i=e.loading,l=e.className,s=void 0===l?"":l,u=e.disabled,d=j(e,["prefixCls","size","loading","className","disabled"]);Object(p.a)("checked"in d||!("value"in d),"Switch","`value` is not a valid prop, do you mean `checked`?");var f=n.useContext(y.b),E=f.getPrefixCls,C=f.direction,k=n.useContext(h.b),w=E("switch",c),N=n.createElement("div",{className:"".concat(w,"-handle")},i&&n.createElement(b.a,{className:"".concat(w,"-loading-icon")})),x=o()(s,(O(t={},"".concat(w,"-small"),"small"===(r||k)),O(t,"".concat(w,"-loading"),i),O(t,"".concat(w,"-rtl"),"rtl"===C),t));return n.createElement(g.a,{insertExtraNode:!0},n.createElement(m,v({},d,{prefixCls:w,className:x,disabled:u||i,ref:a,loadingIcon:N})))}));E.__ANT_SWITCH=!0,E.displayName="Switch";a.a=E},863:function(e,a,t){"use strict";t.r(a);var n=t(99),c=t(419),r=t(42),i=t(0),l=t.n(i),o=t(859),s=t(860),u=t(429),d=t(603),m=t(82),f=t(339),b=t(856),g=t(16),y=t(377),h=t(44),p=t(63),v=(t(168),t(340)),O=t(341),j=function(e){var a=e.visibility,t=e.handleCancel,c=e.handleSave,s=e.value,u=v.a.useForm(),d=Object(r.a)(u,1)[0],m=Object(i.useState)(null),f=Object(r.a)(m,2),b=f[0],g=f[1];Object(i.useEffect)((function(){(0,d.setFieldsValue)(Object(n.a)({},s))}),[s,d]);return l.a.createElement(o.a,{visible:a,okText:s._id?"Save":"Add",onOk:function(){var e=d.getFieldsValue;(0,d.validateFields)().then((function(){var a=e();c(Object(n.a)(Object(n.a)(Object(n.a)({},s),a),{},{image:b}))}))},onCancel:t,closable:!1},l.a.createElement(v.a,{form:d},l.a.createElement(v.a.Item,{name:["categoryNameEnglish"],label:"Category name in English",rules:[{required:!0,message:"name is rquired"}]},l.a.createElement(O.a,null)),l.a.createElement(v.a.Item,{name:["categoryNameMalayalam"],label:"Category name in Malayalam",rules:[{required:!0,message:"name is rquired"}]},l.a.createElement(O.a,null)),l.a.createElement(v.a.Item,{name:["priority"],label:"Displaying Priority"},l.a.createElement(O.a,null)),l.a.createElement("input",{type:"file",onChange:function(e){g(e.target.files[0])}})))},E=o.a.confirm;a.default=Object(g.f)((function(e){var a=e.history,t=Object(i.useState)(!0),o=Object(r.a)(t,2),g=o[0],v=o[1],O=Object(i.useState)([]),C=Object(r.a)(O,2),k=C[0],w=C[1],N=Object(i.useState)(!1),x=Object(r.a)(N,2),_=x[0],I=x[1],S=Object(i.useState)(null),P=Object(r.a)(S,2),A=P[0],D=P[1];Object(i.useEffect)((function(){p.a.getAction("api/v1/category/all").then((function(e){var a=e.data.categories;w(Object(c.a)(a)),v(!1)})).catch((function(e){s.a.error({message:"Error while fetching categories please refresh"}),v(!1)}))}),[]);var M=Object(i.useCallback)((function(e,a){v(!0),p.b.postAction("api/v1/category/update/".concat(e),{active:a}).then((function(t){var n=Object(c.a)(Object(h.a)(k)).find((function(a){return a._id===e})),r=Object(c.a)(Object(h.a)(k)).findIndex((function(a){return a._id===e}));n.active=a;var i=Object(c.a)(Object(h.a)(k));i[r]=n,w(Object(c.a)(i)),v(!1)})).catch((function(e){s.a.error({message:"Error while updating status"}),v(!1)}))}),[k]),T=Object(i.useCallback)((function(e){I(!1),v(!0);var a=Object(c.a)(Object(h.a)(k));if(e._id){var t=Object(h.c)(e);p.b.postAction("api/v1/category/".concat(e._id),t).then((function(e){var t=e.data.category,r=k.findIndex((function(e){return e._id===t._id}));a[r]=Object(n.a)({},t),w(Object(c.a)(a)),s.a.success({message:"Category Editted successfully"}),v(!1)})).catch((function(e){s.a.error({message:"Error while Editting category"}),D(null),v(!1)}))}else{var r=Object(h.c)(e);p.b.postAction("api/v1/category",r).then((function(e){var t=e.data.category;s.a.success({message:"Category added successfully"}),a.push(Object(n.a)({},t)),w(Object(c.a)(a)),v(!1)})).catch((function(e){s.a.error({message:"Error while Adding category"}),D(null),v(!1)}))}}),[k]),F=[{title:"Status",dataIndex:"active",key:"active",render:function(e,a){return l.a.createElement(d.a,{checked:e,onClick:function(e){return M(a._id,e)}})}},{title:"Category(English)",dataIndex:"categoryNameEnglish",key:"categoryNameEnglish",render:function(e,t){return l.a.createElement("span",{onClick:function(){return a.push("/products/".concat(t._id))}},e)}},{title:"Category(Malayalam)",dataIndex:"categoryNameMalayalam",key:"categoryNameMalayalam",render:function(e,t){return l.a.createElement("span",{onClick:function(){return a.push("/products/".concat(t._id))}},e)}},{title:"priority",dataIndex:"priority",key:"priority",render:function(e){return l.a.createElement("span",null,e)}},{title:"Image",dataIndex:"image",key:"image",render:function(e){return l.a.createElement("img",{className:"image",src:"".concat(e),alt:e})}},{title:"",dataIndex:"_id",key:"_id",render:function(e){return l.a.createElement(m.a,{className:"edit-button",onClick:function(){return function(e){var a=Object(c.a)(Object(h.a)(k)).find((function(a){return a._id===e}));D(Object(n.a)({},a)),I(!0)}(e)}},"Edit")}},{title:"",dataIndex:"_id",key:"_id",render:function(e){return l.a.createElement(m.a,{onClick:function(){return a=e,void E({title:"Please remove all products before deleting Category",content:l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,null,"Deleting Category with products will messed up Database"),l.a.createElement(u.a,null,"Otherwise disable it")),onOk:function(){v(!0),p.b.postAction("api/v1/category/delete/".concat(a),{}).then((function(e){if(200===e.status){s.a.success({message:"Category deleted successfully"});var t=Object(c.a)(Object(h.a)(k)).filter((function(e){return e._id!==a}));w(t),v(!1)}})).catch((function(e){s.a.error({message:"Error while deleting category"}),v(!1)}))},onCancel:function(){}});var a},type:"primary",danger:!0},"Delete")}}];return l.a.createElement(f.a,{size:"large",spinning:g},l.a.createElement("div",{className:"items-list"},l.a.createElement("div",{className:"add-button"},l.a.createElement(m.a,{type:"primary",onClick:function(){D(Object(h.a)(y.a)),I(!0)}},"+ Add New")),_&&l.a.createElement(j,{visibility:_,handleCancel:function(){I(!1),D(null)},value:A,handleSave:T}),l.a.createElement("div",{className:"list-table"},l.a.createElement(b.a,{dataSource:Object(h.a)(k),columns:F}))))}))}}]);
//# sourceMappingURL=7.a5e317be.chunk.js.map